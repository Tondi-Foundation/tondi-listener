# Tondi Listener Server Environment Variables

# Server Configuration
TONDI_LISTENER_HOST_URL=127.0.0.1:3000
TONDI_LISTENER_GRPC_URL=grpc://8.210.45.192:16610
TONDI_LISTENER_DATABASE_URL=postgres://postgres:postgres@127.0.0.1/postgres
TONDI_LISTENER_LOG_LEVEL=info
TONDI_LISTENER_ENVIRONMENT=development

# Event Configuration
# Comma-separated list of enabled blockchain events
TONDI_LISTENER_ENABLED_EVENTS=block-added,utxos-changed,virtual-chain-changed

# Event Strategy (real-time, batch, priority)
TONDI_LISTENER_EVENT_STRATEGY=real-time

# Batch Processing (when using batch strategy)
TONDI_LISTENER_BATCH_SIZE=100
TONDI_LISTENER_BATCH_TIMEOUT_MS=100

# Priority Processing (when using priority strategy)
TONDI_LISTENER_HIGH_PRIORITY_EVENTS=block-added,utxos-changed
TONDI_LISTENER_MEDIUM_PRIORITY_EVENTS=virtual-chain-changed
TONDI_LISTENER_LOW_PRIORITY_EVENTS=new-block-template

# Event Processing
TONDI_LISTENER_BUFFER_SIZE=1000
TONDI_LISTENER_ENABLE_DEDUPLICATION=true

# CORS Configuration
# Example 1: Allow all origins (equivalent to no CORS restrictions)
# TONDI_LISTENER_CORS_ALLOWED_ORIGINS=*
# or
# TONDI_LISTENER_CORS_ALLOWED_ORIGINS=

# Example 2: Restrict specific origins
TONDI_LISTENER_CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# Example 3: Allow all methods (equivalent to no CORS restrictions)
# TONDI_LISTENER_CORS_ALLOWED_METHODS=*
# or
# TONDI_LISTENER_CORS_ALLOWED_METHODS=

# Example 4: Restrict specific methods
TONDI_LISTENER_CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE

# Example 5: Allow all headers (equivalent to no CORS restrictions)
# TONDI_LISTENER_CORS_ALLOWED_HEADERS=*
# or
# TONDI_LISTENER_CORS_ALLOWED_HEADERS=

# Example 6: Restrict specific headers
TONDI_LISTENER_CORS_ALLOWED_HEADERS=Content-Type,Authorization

TONDI_LISTENER_CORS_MAX_AGE=3600

# Security Configuration
TONDI_LISTENER_RATE_LIMIT=100
TONDI_LISTENER_MAX_BODY_SIZE=10485760

# wRPC Configuration
# 是否启用wRPC (如果为true，将优先使用wRPC而不是gRPC)
TONDI_LISTENER_WRPC_ENABLED=true

# wRPC协议类型: "ws", "wss", "grpc"
TONDI_LISTENER_WRPC_PROTOCOL=ws

# wRPC节点地址
TONDI_LISTENER_WRPC_HOST=8.210.45.192

# wRPC端口 (如果为0，将使用网络类型的默认端口)
# devnet + borsh = 17610, devnet + json = 18610
# mainnet + borsh = 17110, mainnet + json = 18110
# testnet + borsh = 17210, testnet + json = 18210
TONDI_LISTENER_WRPC_PORT=0

# 网络类型: "mainnet", "testnet", "devnet", "simnet"
TONDI_LISTENER_WRPC_NETWORK=devnet

# 编码类型: "borsh", "json"
TONDI_LISTENER_WRPC_ENCODING=borsh
